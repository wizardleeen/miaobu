# Miaobu Staging Environment Configuration
# Copy to .env and fill in real values

ENVIRONMENT=staging
FRONTEND_URL=https://app.kyvy.me
BACKEND_URL=https://api.kyvy.me

# Database (separate DB from production)
DATABASE_URL=postgresql://miaobu:PASSWORD@localhost:5433/miaobu_staging

# Redis (use DB 1 to separate from production DB 0)
REDIS_URL=redis://localhost:6379/1

# Security (generate new secrets for staging)
JWT_SECRET_KEY=<generate-with-openssl-rand-hex-32>
ENV_ENCRYPTION_KEY=<generate-fernet-key>
MIAOBU_CALLBACK_SECRET=<generate-with-openssl-rand-hex-32>

# GitHub OAuth (create a new OAuth app for staging)
GITHUB_CLIENT_ID=<staging-oauth-app-client-id>
GITHUB_CLIENT_SECRET=<staging-oauth-app-client-secret>
GITHUB_REDIRECT_URI=https://api.kyvy.me/api/v1/auth/github/callback

# GitHub PAT (can reuse production PAT or create a new one)
GITHUB_PAT=<github-personal-access-token>

# Alibaba Cloud (same account as production)
ALIYUN_ACCESS_KEY_ID=<same-as-production>
ALIYUN_ACCESS_KEY_SECRET=<same-as-production>
ALIYUN_REGION=cn-hangzhou
ALIYUN_ACCOUNT_ID=<same-as-production>

# OSS (staging-specific buckets)
ALIYUN_OSS_BUCKET=kyvy-deployments
ALIYUN_OSS_ENDPOINT=oss-cn-hangzhou.aliyuncs.com

# Function Compute (staging-specific)
ALIYUN_FC_REGION=cn-qingdao
ALIYUN_FC_OSS_BUCKET=kyvy-deployments-qingdao
ALIYUN_FC_OSS_ENDPOINT=oss-cn-qingdao.aliyuncs.com
MIAOBU_FC_PREFIX=kyvy

# CDN / ESA (staging-specific site)
CDN_BASE_DOMAIN=kyvy.me
ALIYUN_ESA_SITE_ID=<from-provisioning-script>
ALIYUN_ESA_SITE_NAME=kyvy.me
ALIYUN_ESA_CNAME_TARGET=<from-esa-console>
ALIYUN_ESA_EDGE_KV_NAMESPACE_ID=<from-provisioning-script>
ALIYUN_ESA_EDGE_KV_NAMESPACE=kyvy
ALIYUN_ESA_CNAME_RECORD_ID=<from-esa-console>

# VPC (same VPC as production)
ALIYUN_FC_VPC_ID=<same-as-production>
ALIYUN_FC_VSWITCH_ID=<same-as-production>
ALIYUN_FC_SECURITY_GROUP_ID=<same-as-production>
